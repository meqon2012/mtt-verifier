–ó–∞–º–µ–Ω–∏—Ç–µ –¥–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ index.html:

## 1. –ó–∞–º–µ–Ω–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é analyze() (—Å—Ç—Ä–æ–∫–∞ ~380):

```javascript
async function analyze() {
    if (!currentPromptId) {
        showError('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–º—Ç');
        return;
    }
    if (uploadedFiles.length === 0) {
        showError('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞');
        return;
    }
    
    const loading = document.getElementById('loading');
    const resultsPanel = document.getElementById('resultsPanel');
    
    loading.classList.add('active');
    resultsPanel.classList.remove('active');

    try {
        let filesText = '';
        Object.keys(fileContents).forEach(key => {
            const content = fileContents[key].substring(0, 2000);
            filesText += '\n=== –§–∞–π–ª: ' + key + ' ===\n' + content + '\n';
        });

        let prompt = prompts[currentPromptId].text;
        prompt = prompt.replace('{files}', filesText).replace('{info}', '');

        console.log('üì§ –û—Ç–ø—Ä–∞–≤–ª—è—é –∑–∞–ø—Ä–æ—Å –Ω–∞ backend...');

        const response = await fetch('/api/analyze', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ prompt: prompt })
        });

        if (!response.ok) {
            const errorData = await response.json().catch(() => ({}));
            throw new Error(errorData.error || 'API –æ—à–∏–±–∫–∞: ' + response.status);
        }

        const data = await response.json();
        console.log('üì• –ü–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç API:', data);

        if (!data.choices || !data.choices[0] || !data.choices[0].message) {
            throw new Error('–ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç API');
        }

        const rawContent = data.choices[0].message.content;
        console.log('üìã –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –æ—Ç–≤–µ—Ç–∞ –ò–ò:', rawContent);

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –í–°–ï —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–∞–∫ –µ—Å—Ç—å
        displayResults({
            rawResponse: rawContent,
            fileName: '–û—Ç–≤–µ—Ç –æ—Ç Perplexity AI'
        });

        showSuccess('‚úÖ –û—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω –æ—Ç –ò–ò');

    } catch (error) {
        console.error('‚ùå –û—à–∏–±–∫–∞:', error);
        showError('‚ùå –û—à–∏–±–∫–∞: ' + error.message);
    } finally {
        loading.classList.remove('active');
    }
}
```

## 2. –ó–∞–º–µ–Ω–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é displayResults() (—Å—Ç—Ä–æ–∫–∞ ~520):

```javascript
function displayResults(result) {
    const resultsContent = document.getElementById('resultsContent');
    const resultsPanel = document.getElementById('resultsPanel');

    let html = '';

    // –ï—Å–ª–∏ —ç—Ç–æ —Å—ã—Ä–æ–π –æ—Ç–≤–µ—Ç (–Ω–æ–≤–∞—è –ª–æ–≥–∏–∫–∞)
    if (result.rawResponse) {
        html = `
            <div style="background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 8px; padding: 16px; margin-bottom: 16px;">
                <div style="font-size: 12px; color: #6b7280; margin-bottom: 8px; font-weight: 600;">
                    ü§ñ ${result.fileName}
                </div>
                <pre style="background: #ffffff; border: 1px solid #e5e7eb; border-radius: 6px; padding: 12px; font-size: 13px; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word; color: #1f2937; font-family: monospace; line-height: 1.5; margin: 0;">
${escapeHtml(result.rawResponse)}
                </pre>
            </div>
        `;
    } 
    // –ï—Å–ª–∏ —ç—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON —Ä–µ–∑—É–ª—å—Ç–∞—Ç (—Å—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞, –µ—Å–ª–∏ –≤–µ—Ä–Ω–µ—Ç—Å—è)
    else if (result.summary && result.checks) {
        html = '<div class="summary-card"><div class="summary-item"><span class="summary-label">–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç:</span><span class="summary-value">' + result.summary.name + '</span></div><div class="summary-item"><span class="summary-label">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:</span><span class="summary-value">' + result.summary.birthDate + '</span></div><div class="summary-item"><span class="summary-label">–ï–ì–†–ù–ò–ü:</span><span class="summary-value">' + result.summary.egrip + '</span></div><div class="summary-item"><span class="summary-label">–ê–¥—Ä–µ—Å:</span><span class="summary-value">' + result.summary.address + '</span></div></div>';

        result.checks.forEach(check => {
            const icon = check.status === 'pass' ? '‚úì' : (check.status === 'fail' ? '‚úó' : '?');
            html += '<div class="checklist-item ' + check.status + '"><div class="checklist-item-number"><span class="checklist-status-icon">' + icon + '</span><span>–ü—É–Ω–∫—Ç ' + check.number + '</span></div><div class="checklist-item-text">' + check.title + '</div><div class="checklist-item-answer">' + check.description + '</div></div>';
        });

        const approved = result.recommendation === '–û–î–û–ë–†–ò–¢–¨';
        html += '<div class="conclusion ' + (approved ? 'approved' : 'rejected') + '">' + (approved ? '‚úì –û–î–û–ë–†–ò–¢–¨' : '‚úó –û–¢–ö–õ–û–ù–ò–¢–¨') + '</div><div style="margin-top: 16px; padding: 16px; background: #f9fafb; border-radius: 8px; font-size: 14px;"><strong>–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:</strong><br>' + result.reasoning + '</div>';
    }

    resultsContent.innerHTML = html;
    resultsPanel.classList.add('active');
}

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è HTML
function escapeHtml(text) {
    const map = {
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        '"': '&quot;',
        "'": '&#039;'
    };
    return text.replace(/[&<>"']/g, m => map[m]);
}
```

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:

‚úÖ **–ù–µ –ø–∞—Ä—Å–∏—Ç JSON** - –ø—Ä–æ—Å—Ç–æ –±–µ—Ä–µ—Ç –≤–µ—Å—å –æ—Ç–≤–µ—Ç –∫–∞–∫ –µ—Å—Ç—å
‚úÖ **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤ –∫—Ä–∞—Å–∏–≤–æ–π –∫–æ—Ä–æ–±–∫–µ** - –º–æ–Ω–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ —à—Ä–∏—Ñ—Ç, –≤—ã–¥–µ–ª–µ–Ω–æ
‚úÖ **–í–∏–¥–Ω–æ –≤—Å—ë —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ** - –Ω–∏—á–µ–≥–æ –Ω–µ —Ç–µ—Ä—è–µ—Ç—Å—è
‚úÖ **–≠–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç HTML** - —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –Ω–µ —Å–ª–æ–º–∞—é—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Å—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞** - –µ—Å–ª–∏ –≤–µ—Ä–Ω–µ—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç, –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

## –†–µ–∑—É–ª—å—Ç–∞—Ç:

–í –ø—Ä–∞–≤–æ–π –∫–æ–ª–æ–Ω–∫–µ –±—É–¥–µ—Ç –≤–∏–¥–µ–Ω –í–°–ï –æ—Ç–≤–µ—Ç –æ—Ç –ò–ò —Ä–æ–≤–Ω–æ –∫–∞–∫ –æ–Ω –ø—Ä–∏—à–µ–ª - –±–µ–∑ –≤—Å—è–∫–∏—Ö –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π üìã
